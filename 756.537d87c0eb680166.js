"use strict";(self.webpackChunkproject_management_app=self.webpackChunkproject_management_app||[]).push([[756],{3756:($,A,n)=>{n.r(A),n.d(A,{UserModule:()=>R});var c=n(9808),p=n(7322),r=n(3075),E=n(7531),T=n(7423),v=n(7232),h=n(1083),t=n(5e3),N=n(4244),S=n(1135),w=n(3656),j=n(2619),J=n(7819),Y=n(6518),L=n(6179);function q(e,s){if(1&e&&(t.TgZ(0,"mat-form-field")(1,"mat-label",null,5),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",6),t.TgZ(6,"mat-error"),t._uU(7),t.qZA()()),2&e){const o=s.$implicit,i=t.MAs(2),l=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,5,"labels."+o.label)),t.xp6(2),t.s9C("id",o.id),t.s9C("type",o.type),t.s9C("formControlName",o.id),t.xp6(2),t.Oqu(l.createErrorMessage(o,i.innerText))}}function B(e,s){1&e&&(t.TgZ(0,"span",7),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"edited")))}let z=(()=>{class e{constructor(o,i,l,u,m,f,g){this.translate=o,this.location=i,this.route=l,this.fb=u,this.httpAuthService=m,this.authService=f,this.appStateService=g,this.errorUpdateMsg=new S.X(""),this.userId="",this.userEdited=!1,this.required="",this.formFields=[{id:"name",label:"name",formControlName:"name",type:"text"},{id:"login",label:"login",formControlName:"email",type:"text"},{id:"password",label:"password",formControlName:"password",type:"password"},{id:"confirmPassword",label:"confirm password",formControlName:"confirmPassword",type:"password"}],this.editForm=this.fb.group({name:[null,[r.kI.required,r.kI.minLength(3),r.kI.maxLength(20)]],login:[null,[r.kI.required,r.kI.email]],password:[null,[r.kI.required,(0,w.W)(j._V)]],confirmPassword:[null,[r.kI.required,(0,w.I)()]]}),this.jwtHelper=new N.N0}createErrorMessage(o,i){var l,u,m,f,g,b,C,M,O,x,P,U,_,y,k,Z,I,F;let d;switch(!0){case!!(null===(m=null===(u=null===(l=this.editForm)||void 0===l?void 0:l.get(o.id))||void 0===u?void 0:u.errors)||void 0===m?void 0:m.required):this.translate.get("required_error",{label:"\u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430"===i?"\u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0443\u044e \u043f\u043e\u0447\u0442\u0443":i}).subscribe(a=>{d=a});break;case!!(null===(b=null===(g=null===(f=this.editForm)||void 0===f?void 0:f.get(o.id))||void 0===g?void 0:g.errors)||void 0===b?void 0:b.email):this.translate.get("email_error").subscribe(a=>{d=a});break;case!!(null===(O=null===(M=null===(C=this.editForm)||void 0===C?void 0:C.get(o.id))||void 0===M?void 0:M.errors)||void 0===O?void 0:O.regEx):this.translate.get("regEx_error").subscribe(a=>{d=a});break;case!!(null===(U=null===(P=null===(x=this.editForm)||void 0===x?void 0:x.get(o.id))||void 0===P?void 0:P.errors)||void 0===U?void 0:U.confirm):this.translate.get("confirm_error").subscribe(a=>{d=a});break;case!!(null===(k=null===(y=null===(_=this.editForm)||void 0===_?void 0:_.get(o.id))||void 0===y?void 0:y.errors)||void 0===k?void 0:k.minlength):this.translate.get("min_error").subscribe(a=>{d=a});break;case!!(null===(F=null===(I=null===(Z=this.editForm)||void 0===Z?void 0:Z.get(o.id))||void 0===I?void 0:I.errors)||void 0===F?void 0:F.maxlength):this.translate.get("max_error").subscribe(a=>{d=a});break;default:d=""}return d}updateUser(){delete this.editForm.value.confirmPassword,this.userId=this.jwtHelper.decodeToken(localStorage.getItem("token")).userId,localStorage.setItem("name",this.editForm.value.name),this.authService.name$.next(localStorage.getItem("name")),this.httpAuthService.upDateUser(this.editForm.value,this.userId).subscribe(o=>{"string"==typeof o?this.errorUpdateMsg.next(o):this.userEdited=!0})}goBack(){this.location.back(),this.userEdited=!1}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(v.sK),t.Y36(c.Ye),t.Y36(h.F0),t.Y36(r.qu),t.Y36(J.d),t.Y36(Y.e),t.Y36(L.Z))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-editing"]],decls:16,vars:16,consts:[[1,"edit-form",3,"formGroup"],[4,"ngFor","ngForOf"],["class","edited",4,"ngIf"],["mat-flat-button","","color","primary",1,"save-btn",3,"disabled","click"],["mat-flat-button","",1,"cancel-btn",3,"click"],["label",""],["matInput","","autocomplete","off",3,"id","type","formControlName"],[1,"edited"]],template:function(o,i){1&o&&(t.TgZ(0,"form",0)(1,"h2"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,q,8,7,"mat-form-field",1),t.YNc(5,B,3,3,"span",2),t.TgZ(6,"mat-error"),t._uU(7),t.ALo(8,"async"),t.qZA(),t.TgZ(9,"div")(10,"button",3),t.NdJ("click",function(){return i.updateUser()}),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"button",4),t.NdJ("click",function(){return i.goBack()}),t._uU(14),t.ALo(15,"translate"),t.qZA()()()),2&o&&(t.Q6J("formGroup",i.editForm),t.xp6(2),t.Oqu(t.lcZ(3,8,"edit_user")),t.xp6(2),t.Q6J("ngForOf",i.formFields),t.xp6(1),t.Q6J("ngIf",!0===i.userEdited),t.xp6(2),t.Oqu(t.lcZ(8,10,i.errorUpdateMsg)),t.xp6(3),t.Q6J("disabled",!i.editForm.valid),t.xp6(1),t.Oqu(t.lcZ(12,12,"save_btn")),t.xp6(3),t.Oqu(t.lcZ(15,14,"cancel_btn")))},directives:[r._Y,r.JL,r.sg,c.sg,p.KE,p.hX,E.Nt,r.Fj,r.JJ,r.u,p.TO,c.O5,T.lW],pipes:[v.X$,c.Ov],styles:["form[_ngcontent-%COMP%]{font-family:Inter,sans-serif;display:flex;margin:0 auto;flex-direction:column;width:345px;background-color:#f5f5f5;align-items:center;padding:20px;border-radius:16px}form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-family:Inter,sans-serif;font-weight:600;color:#48474a}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:420px;height:44px;border-radius:4px;background:#ffffff}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:130px;height:40px;border:none;border-radius:4px;margin:4px;transition:all .2s ease-out;font-size:18px;font-family:Inter,sans-serif;font-weight:500;color:#a6a5ab}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transition:all .2s ease-out}form[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]{color:#fff;background:#76a5ea}form[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]:hover{background:#587eb5}form[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]:disabled{color:#c4c4c44d;color:#fff;background:rgba(118,165,234,.2)}form[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]:disabled:hover{color:#fff;background:rgba(118,165,234,.2)}form[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{color:#fff;background:#f595a0}form[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover{background:#d8727d}form[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:disabled{color:#c4c4c44d;color:#fff;background:rgba(216,114,125,.1)}form[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:disabled:hover{color:#fff;background:rgba(216,114,125,.1)}.edited[_ngcontent-%COMP%]{font-size:18px;color:#538f51}"]}),e})();const X=[{path:"",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-user"]],decls:1,vars:0,template:function(o,i){1&o&&t._UZ(0,"app-editing")},directives:[z],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:calc(100% - 101px)}"]}),e})()}];let Q=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[h.Bz.forChild(X)],h.Bz]}),e})(),R=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[c.ez,p.lN,r.u5,r.UX,E.c,Q,T.ot,v.aw]]}),e})()}}]);